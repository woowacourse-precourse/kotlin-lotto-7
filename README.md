# kotlin-lotto-precourse

## 🍀 2주차 미션 리뷰

+ 지난 주 개인 목표
    + **클래스를 기능별로 세분화하여 유지보수성을 높이기**
    + **내가 추구하는 코드 작성하기**
    + **예외 처리를 깊이 생각하기**

+ 개인 목표를 얼마나 달성했나요 ?
    + SAM Interface To Ramda, MVI, Delegate Pattern 등 좀 더 코틀린스러운 코드를 만들기 위해
      노력했고 꽤나 괜찮은 코드를 만든 것 같다.
    + 에러 처리도 다양한 에러 상황에 대한 고민하였고 에러 처리에서도 만족할 만큼 디테일 하게 처리할 수 있었다.

+ 짧은 회고

> 이번 미션의 흑백 요리사에 비유하면 내 코드를 한 줄로 표현하면 **"맛 없는 코드"** 다.<br>
> 마치 겉보기에 화려하고 예쁘지만 정작 맛이라는 요구사항을 만족하지 못한 음식처럼<br>
> 내 코드도 겉보기엔 화려한 아키텍처와 깊은 기술을 적용한 것 처럼 보이지만 정작 문제의 요구사항을 정확히 풀어내지 못했다.<br>
> 1주차에 분명 같은 실수를 하고 이에 대한 대비책으로 체크 리스트까지 만들었다. 그럼에도 왜 자꾸 이런 실수를 하는걸까?<br>
> 어쩌면 좋은 코드, 좋은 아키텍처를 만들기 위해 노력했다고 스스로 생각했지만 어쩌면 나는 겉으로 보기에 화려한 코드를 만들고 싶던게 아닐까 ?<br>

## 🏴‍☠️ 이번 미션에서 도전할 목표

1. **정확한 문제의 요구사항을 구현하자**

+ 아무리 좋은 아키텍처, 예쁜 코드를 짜봐야 문제의 요구 사항을 정확히 풀어내지 못하면
  아무 쓸모 없는 코드다. 정확한 맛 정확한 요구 사항을 구현하자

2. **겸손하자**

+ 겉으로 보기에 화려한 코드보다 문제를 정확히 푼 쓰레기가 오백만배는 더 훌륭하다.

3. **아키텍처 금지**

+ Class 하나에 모든 기능을 넣는 한이 있더라도 모든 기능을 완벽하게 구현할 때 까지 아키텍처는 사용하지 말자.

## ⚙️ 기능 요구 사항 분석

### 주제 : 로또 발매기 구현

### 🕺 유저 프로세스 

+ 사용자에게 로또 구입 금액을 입력 받는다.
+ 이 때, 구입 금액은 **1,000원 단위**로 입력 받는다.
+ **6개의 당첨 번호**를 입력 받으며 번호는 **쉼표(,)** 를 기준으로 구분한다.
+ 이 때, 당첨 번호는 **중복 되선 안된다.**
+ **하나의 보너스 번호**를 입력 받는다.

### 🎱 로또 발매기 프로세스

+ 로또 번호 발행 규칙
    + 로또 번호의 숫자 범위는 **1~45**까지다.
    + 1개의 로또를 발행할 때 중복되지 않는 6개의 숫자를 뽑는다.
    + 발행한 로또 수량 및 번호를 출력한다.
    + 로또 번호는 **오름차순**으로 정렬하여 보여준다.
      ```
      출력 예제
      
      8개를 구매했습니다.
      [8, 21, 23, 41, 42, 43]
      [3, 5, 11, 16, 32, 38]
      [7, 11, 16, 35, 36, 44]
      [1, 8, 11, 31, 41, 42]
      [13, 14, 16, 38, 42, 45]
      [7, 11, 30, 40, 42, 43]
      [2, 13, 22, 32, 38, 45]
      [1, 3, 5, 14, 22, 45]
      ```
+ 로또 판매 규칙
    + 로또 발매기는 구입 금액 만큼 로또를 발행해야한다.
    + 로또 한 장의 가격은 1000원이다.
+ 로또 당첨 금액 규칙
    + 1등: 6개 번호 일치 -> 2,000,000,000원
    + 2등: 5개 번호 + 보너스 번호 일치 -> 30,000,000원
    + 3등: 5개 번호 일치 -> 1,500,000원
    + 4등: 4개 번호 일치 -> 50,000원
    + 5등: 3개 번호 일치 -> 5,000원
    + 사용자가 구매한 로또 번호와 당첨 번호를 비교하여 **당첨 내역** 및 **수익률**을 출력하고 로또 게임을 종료한다.
    + 수익률은 **소수점 둘째 자리에서 반올림**한다
        ```
        당첨 내역 출력 예제
     
        3개 일치 (5,000원) - 1개
        4개 일치 (50,000원) - 0개
        5개 일치 (1,500,000원) - 0개
        5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
        6개 일치 (2,000,000,000원) - 0개
      ```

        ```
         수익률 출력 예제
         총 수익률은 62.5%입니다.
       ```

## ❌ 프로세스별 에러 예측 및 요구사항

+ 사용자가 잘못된 값을 입력할 경우 IllegalArgumentException을 발생시킨다.
+ "[ERROR]"로 시작하는 에러 메시지를 출력 후 그 부분부터 입력을 다시 받는다.
+ Exception이 아닌 IllegalArgumentException, IllegalStateException 등과 같은 명확한 유형을 처리한다.

```
에러 메시지 출력 예제
[ERROR] 로또 번호는 1부터 45 사이의 숫자여야 합니다.
```

### 1. 정수형 공통 에러 처리

| 상황                        | 에러 메시지            | 타입             |
|---------------------------|-------------------|----------------|
| 공백인 경우                    | 빈 값이 입력 되었어요.     | EMPTY_INPUT    |
| 숫자가 아닌 경우                 | 정수만 입력해주세요.       | INVALID_INPUT  |
| 정수형으로 표현할 수 있는 범위를 벗어난 경우 | 입력한 값이 범위를 벗어났어요. | EXCEED_MAX_INT |

### 2. 유저 프로세스 에러 처리

#### 구입 금액

| 상황                  | 에러 메시지                 | 타입             |
|---------------------|------------------------|----------------|
| 1회 구매 가능 금액을 초과할 경우 | 1회 최대 구입 금액은 10만원 입니다. | OVER_MAX_PRICE |
| 천원 단위가 아닌 경우        | 구입 금액은 천원 단위로만 입력해주세요. | INVALID_UNIT   |

#### 당첨 번호

| 상황                | 에러 메시지                        | 타입                 |
|-------------------|-------------------------------|--------------------|
| 로또 번호의 범위를 벗어난 경우 | 당첨 번호는 1부터 45 사이의 숫자만 입력해주세요. | EXCEED_INPUT       |
| 구분자가 쉼표(,)가 아닌 경우 | 숫자와 구분자 쉼표(,)만 입력해주세요.        | INVALID_FORMAT     |
| 6개가 아닌 경우         | 당첨 번호는 6개를 입력해 주세요.           | INVALID_SIZE       |
| 중복된 경우            | 당첨 번호는 중복 될 수 없어요.            | INVALID_DUPLICATED |

#### 보너스 번호

| 상황                | 에러 메시지                          |
|-------------------|---------------------------------|
| 로또 번호의 범위를 벗어난 경우 | 보너스 번호는 1부터 45 사이의 숫자만 입력해주세요.  |
