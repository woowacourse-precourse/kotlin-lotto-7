# kotlin-lotto-precourse

## 프로젝트 개요

간단한 로또 발매기 애플리케이션입니다. 사용자가 입력한 금액만큼 로또 티켓을 생성하고, 당첨 번호를 입력받아 일치하는 개수에 따라 당첨 내역과 수익률을 계산하여 결과를 출력합니다.

## 요구 사항

### 기능 요구 사항

1. **로또 티켓 생성**:
    - 사용자가 입력한 구매 금액에 해당하는 만큼 로또 티켓을 발행한다.
    - 티켓의 가격은 장당 1,000원이며, 구매 금액이 1,000원 단위로 나누어 떨어지지 않는 경우 예외 처리한다.
2. **랜덤 번호 생성**:
    - 각 로또 티켓에 1에서 45 사이의 중복되지 않은 6개의 숫자를 랜덤으로 생성하여 기입한다.
3. **당첨 번호 입력**:
    - 사용자는 당첨 번호 6개와 보너스 번호 1개를 입력합니다.
4. **당첨 결과 확인**:
    - 사용자가 구매한 티켓과 당첨 번호를 비교하여 일치하는 번호의 개수에 따라 당첨 등수를 결정하고 해당 등수의 당첨 횟수를 기록합니다.
    - 상금
        - 1등: 6개 일치 - 20억 원
        - 2등: 5개 일치 + 보너스 번호 일치 - 3천만 원
        - 3등: 5개 일치 - 150만 원
        - 4등: 4개 일치 - 5만 원
        - 5등: 3개 일치 - 5천 원
5. **결과 출력**:
    - 구매한 로또 티켓의 개수와 각 티켓의 번호를 오름차순으로 정렬하여 출력합니다.
    - 각 등수별 당첨 횟수와 총 수익률을 소수점 둘째 자리까지 반올림하여 출력합니다.
6. **예외 처리**:
    - 사용자가 잘못된 입력을 했을 경우, IllegalArgumentException을 발생시키고 입력을 다시 받습니다.

### 입출력 요구 사항

- **입력**:
    - 로또 구입 금액 (1,000원 단위)
    - 당첨 번호 6개 및 보너스 번호 1개
- **출력**:
    - 구매한 로또 티켓 개수와 각 티켓의 번호 (각 티켓에 대해, 번호를 오름차순 정렬)
    - 등수별 당첨 횟수와 당첨금
    - 총 수익률

### 예외 상황

- 예외가 발생할 경우, `"[ERROR]"`로 시작하는 에러 메시지를 출력해야 한다.
    - ex) `[ERROR] 로또 번호는 1부터 45 사이의 숫자여야 합니다.`

### 프로그래밍 요구 사항

- **언어 및 버전**: Kotlin 1.9.24
- **코드 컨벤션**: Kotlin Style Guide를 따른다.
- **코드 구조**:
    - 각 함수가 한 가지 일만 하도록 구현한다.
    - 각 함수의 길이는 15라인을 넘지 않도록 구현한다.
- **테스트**:
    - JUnit 5와 AssertJ를 이용해 단위 테스트를 작성하여 기능이 정상적으로 동작하는지 확인한다.
- **프로젝트 구성**:
    - `Lotto` 클래스에는 `numbers` 외에 다른 필드를 추가할 수 없다.
    - `camp.nextstep.edu.missionutils`에서 제공하는 `Randoms` 및 `Console` API를 사용하여 구현해야 한다.
        - Random 값 추출은 `camp.nextstep.edu.missionutils.Randoms`의 `pickUniqueNumbersInRange()`를 활용한다.
        - 사용자가 입력하는 값은 `camp.nextstep.edu.missionutils.Console`의 `readLine()`을 활용한다.

## 기능 구현 사항

### 1. 로또 구입 금액 입력받기

- 사용자로부터 로또를 구매할 금액을 입력받습니다.
    - 금액은 1,000원 단위로 입력되어야 하며, 1,000원으로 나누어 떨어지지 않을 경우 `IllegalArgumentException`을 발생시킵니다.

### 2. 당첨 번호 및 보너스 번호 입력받기

- 사용자로부터 당첨 번호 6개와 보너스 번호 1개를 입력받습니다.
    - 당첨 번호는 쉼표(,)로 구분되어 입력되며, 1~45 사이의 숫자여야 합니다.
    - 보너스 번호 역시 1~45 사이의 숫자여야 하며, 당첨 번호와 중복되지 않아야 합니다.

### 3. 입력받은 문자열 파싱하기

- 사용자로부터 입력받은 문자열을 파싱하여 Lotto 클래스가 사용할 수 있는 형태로 변환합니다.

### 4. 로또 티켓 생성

- 입력받은 금액에 따라 구매 가능한 로또 티켓 수를 계산하고, 해당 수만큼 로또 티켓을 생성합니다.
    - 각 로또 티켓은 중복되지 않은 1~45 사이의 숫자 6개로 구성되며, 숫자는 랜덤하게 선택됩니다.
    - 생성된 로또 번호는 오름차순으로 정렬하여 출력됩니다.

### 5. 당첨 결과 계산

- 사용자가 구매한 각 로또 티켓의 번호와 당첨 번호를 비교하여 일치하는 개수에 따라 당첨 등수를 계산합니다.
    - 당첨 기준:
        - 1등: 6개 번호 일치 (20억 원)
        - 2등: 5개 번호 일치 + 보너스 번호 일치 (3천만 원)
        - 3등: 5개 번호 일치 (150만 원)
        - 4등: 4개 번호 일치 (5만 원)
        - 5등: 3개 번호 일치 (5천 원)

### 6. 결과 출력

- 당첨 결과와 함께 각 등수별 당첨 횟수를 출력합니다.
    - 사용자의 총 수익률을 계산하여 소수점 둘째 자리까지 반올림하여 출력합니다.
    - 예시 출력
      ```
      구입금액을 입력해 주세요.
      8000
          
      8개를 구매했습니다.
      [8, 21, 23, 41, 42, 43]
      [3, 5, 11, 16, 32, 38]
      [7, 11, 16, 35, 36, 44]
      [1, 8, 11, 31, 41, 42]
      [13, 14, 16, 38, 42, 45]
      [7, 11, 30, 40, 42, 43]
      [2, 13, 22, 32, 38, 45]
      [1, 3, 5, 14, 22, 45]
        
      당첨 번호를 입력해 주세요.
      1,2,3,4,5,6
        
      보너스 번호를 입력해 주세요.
      7
      
      당첨 통계
      ---
      3개 일치 (5,000원) - 1개
      4개 일치 (50,000원) - 0개
      5개 일치 (1,500,000원) - 0개
      5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
      6개 일치 (2,000,000,000원) - 0개
      총 수익률은 62.5%입니다.
      ```

### 7. 잘못된 입력에 대한 예외 처리

- 입력값이 다음의 조건에 부합하지 않을 경우 `IllegalArgumentException`을 발생시키고 `[ERROR]`로 시작하는 에러 메시지를 출력합니다.
    - 로또 구입 금액이 1,000원 단위로 나누어 떨어지지 않을 때
    - 당첨 번호와 보너스 번호가 1~45 범위를 벗어날 때
    - 보너스 번호가 당첨 번호와 중복될 때

## 예외 상황 정리

### 1. 로또 구입 금액의 입력에 대한 예외 처리

| 예외 상황           | 예시 입력   | 동작                       | 동작 결과                             |
|-----------------|---------|--------------------------|-----------------------------------|
| 1,000원 단위가 아닐 때 | `1500`  | 1,000원 단위가 아닌 값은 허용되지 않음 | `[ERROR] 구입 금액은 1,000원 단위여야 합니다.` |
| 음수 금액 입력        | `-5000` | 음수 금액은 허용되지 않음           | `[ERROR] 구입 금액은 양수여야 합니다.`        |
| 빈 문자열 입력        | `""`    | 빈 문자열은 허용되지 않음           | `[ERROR] 구입 금액을 입력해야 합니다.`        |

### 2. 당첨 번호 및 보너스 번호의 입력에 대한 예외 처리

| 예외 상황              | 예시 입력              | 동작                       | 동작 결과                                  |
|--------------------|--------------------|--------------------------|----------------------------------------|
| 당첨 번호 범위 초과        | `1,2,3,4,5,46`     | 1~45 범위를 벗어난 번호는 허용되지 않음 | `[ERROR] 당첨 번호는 1부터 45 사이의 숫자여야 합니다.`  |
| 당첨 번호 중 중복된 것이 존재  | `1,1,3,4,5,6`      | 당첨 번호의 중복을 허용하지 않음       | `[ERROR] 당첨 번호는 중복되지 않은 수로 이루어져야 합니다.` |
| 보너스 번호가 당첨 번호와 중복됨 | `1,2,3,4,5,6`, `6` | 보너스 번호는 당첨 번호와 중복될 수 없음  | `[ERROR] 보너스 번호는 당첨 번호와 중복되지 않아야 합니다.` |
| 당첨 번호를 6개 미만으로 입력함 | `1,2,3,4,5`        | 6개의 당첨 번호가 필요함           | `[ERROR] 당첨 번호는 6개를 입력해야 합니다.`         |
| 빈 문자열 입력           | `""`               | 빈 문자열을 허용하지 않음           | `[ERROR] 당첨 번호를 입력해야 합니다.`             |

